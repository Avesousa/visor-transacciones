package com.imagosur.visor_transacciones.webservice;

import java.io.IOException;
import java.math.BigInteger;
import java.security.GeneralSecurityException;
import java.security.KeyManagementException;
import java.security.KeyStoreException;
import java.security.NoSuchAlgorithmException;
import java.security.cert.X509Certificate;
import java.util.ArrayList;
import java.util.Arrays;
import java.util.HashSet;
import java.util.List;
import java.util.Set;

import javax.net.ssl.SSLContext;

import org.apache.http.impl.client.CloseableHttpClient;
import org.apache.http.impl.client.HttpClients;
import org.apache.http.ssl.*;
import org.apache.http.util.EntityUtils;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.beans.factory.annotation.Value;
import org.springframework.http.HttpEntity;
import org.springframework.http.HttpHeaders;
import org.springframework.http.HttpMethod;
import org.springframework.http.MediaType;
import org.springframework.http.ResponseEntity;
import org.springframework.http.client.BufferingClientHttpRequestFactory;
import org.springframework.http.client.ClientHttpRequestInterceptor;
import org.springframework.http.client.HttpComponentsClientHttpRequestFactory;
import org.springframework.stereotype.Service;
import org.springframework.web.client.RestClientException;
import org.springframework.web.client.RestTemplate;

import com.fasterxml.jackson.databind.jsonFormatVisitors.JsonObjectFormatVisitor;
import com.google.gson.Gson;
import com.imagosur.security.domain.User;
import com.imagosur.visor_transacciones.helper.Documento;
import com.imagosur.visor_transacciones.helper.Report;
import com.imagosur.visor_transacciones.helper.UserHelper;
import com.imagosur.visor_transacciones.request.model.Consulta;
import com.imagosur.visor_transacciones.response.model.DetalleTransaccion;
import com.imagosur.visor_transacciones.response.model.Pago;
import com.imagosur.visor_transacciones.response.model.Store;
import com.imagosur.visor_transacciones.response.model.Transaccion;
import com.imagosur.visor_transacciones.response.view.*;

import net.sf.jasperreports.engine.JRException;

@Service
public class WebServiceImpl implements WebService {

	public static final Logger logger = LoggerFactory.getLogger(WebServiceImpl.class);
	@Value("${teradata.serve.enlace}")
	private String url;
	@Value("${teradata.serve.ambiente}")
	private String ambiente;
	@Value("${teradata.serve.ubicacion}")
	private String ubicacion;
	@Value("${teradata.serve.ubicacion.mediopago}")
	private String ubicacionMedioPago;
	@Value("${teradata.consulta.authorization}")
	private String autorizacion;
	@Value("${teradata.consulta.tipo.transacciones}")
	private String dataTipos;
	@Value("${teradata.consulta.cabecera}")
	private String dataTransacciones;
	@Value("${teradata.consulta.detalleventa}")
	private String dataDetalles;
	@Value("${teradata.consulta.mediopago}")
	private String dataMedioPago;
	@Autowired
	private Documento documento;
	@Autowired
	private WebServiceErrorHandler manejoError;
	private LogginWebService loggin;
	private MediaType tipoMedio;
	
	
	@Override
	public Tipos getTipos() throws GeneralSecurityException {
		logger.info("getTipos() Ha comenzado a realizar la consulta");
		tipoMedio = MediaType.APPLICATION_JSON;
		RestTemplate rest = armarConexion();
		HttpHeaders header = armarCabecera(false);
		HttpEntity entidad = new HttpEntity(header);
		ResponseEntity<Tipos> response = rest.exchange(crearUrl(this.dataTipos,false),HttpMethod.GET,entidad,Tipos.class);
		
		return response.getBody();
	}

	@Override
	public String getDetalles(BigInteger id) throws GeneralSecurityException {
		logger.info("getDetalles() Ha comenzado a realizar la consulta");
		RestTemplate rest = armarConexion();
		tipoMedio = MediaType.APPLICATION_JSON;
		HttpEntity entidad = new HttpEntity(armarCabecera(false));
		ResponseEntity<String> response = rest.exchange(crearUrl(this.dataDetalles,false)+"/"+id,HttpMethod.GET,entidad,String.class);
		Gson gDetalles = new Gson();
		
		DetalleTransaccion detalle = gDetalles.fromJson(response.getBody(), DetalleTransaccion.class);
		
		detalle = varificarPago(detalle);
		
		return new Gson().toJson(detalle);
		/*String respuesta = "{\"Head\":[{\"AutElectronicCodeExpiration_Dt\":null,\"AutorizationElectronicCodeAnt_id\":\"                            \",\"AutorizationElectronicCode_id\":\"                            \",\"CDay_id\":\"2020-05-14\",\"Checkout_id\":10,\"OpPoint_Description\":\"001 - San Isidro\",\"PosEvent_id\":10000213,\"ReceiptNbr_id\":255522,\"SaleTrx_id\":3181303573,\"total_amount\":2390.51}],\"detail\":[{\"ItemType_description\":\"Venta Normal\",\"ProductBarCode_id\":\"02300397000002              \",\"SaleQty\":0.588,\"SaleTrx_id\":3181303573,\"TotAmount\":41.1,\"itemType_id\":0,\"product_description\":\"MANZANA X KG\"},{\"ItemType_description\":\"Venta Normal\",\"ProductBarCode_id\":\"02302015000005              \",\"SaleQty\":0.413,\"SaleTrx_id\":3181303573,\"TotAmount\":144.14,\"itemType_id\":0,\"product_description\":\"BOLA DE LOMO NOVILLITO\"},{\"ItemType_description\":\"Venta Normal\",\"ProductBarCode_id\":\"02302525000007              \",\"SaleQty\":0.498,\"SaleTrx_id\":3181303573,\"TotAmount\":54.73,\"itemType_id\":0,\"product_description\":\"CIRIOLA FLAUTITA X KG\"},{\"ItemType_description\":\"Venta Normal\",\"ProductBarCode_id\":\"02302745000009              \",\"SaleQty\":0.714,\"SaleTrx_id\":3181303573,\"TotAmount\":163.51,\"itemType_id\":0,\"product_description\":\"(PC) ROAST BEEF X KG\"},{\"ItemType_description\":\"Venta Normal\",\"ProductBarCode_id\":\"02304568000006              \",\"SaleQty\":0.194,\"SaleTrx_id\":3181303573,\"TotAmount\":81.29,\"itemType_id\":0,\"product_description\":\"QUESO AZUL LUCRECIA X KG\"},{\"ItemType_description\":\"Venta Normal\",\"ProductBarCode_id\":\"02304569000005              \",\"SaleQty\":0.204,\"SaleTrx_id\":3181303573,\"TotAmount\":99.35,\"itemType_id\":0,\"product_description\":\"QUESO PATEGRAS LUCRECIA X KG\"},{\"ItemType_description\":\"Venta Normal\",\"ProductBarCode_id\":\"02304652000004              \",\"SaleQty\":0.604,\"SaleTrx_id\":3181303573,\"TotAmount\":36.18,\"itemType_id\":0,\"product_description\":\"NARANJA DE JUGO COMERCIAL X KG.\"},{\"ItemType_description\":\"Venta Normal\",\"ProductBarCode_id\":\"02305561000000              \",\"SaleQty\":0.234,\"SaleTrx_id\":3181303573,\"TotAmount\":140.17,\"itemType_id\":0,\"product_description\":\"LONGANIZA TIPO CALABREZA EL FAMILIAR X KG\"},{\"ItemType_description\":\"Venta Normal\",\"ProductBarCode_id\":\"02320045000000              \",\"SaleQty\":0.124,\"SaleTrx_id\":3181303573,\"TotAmount\":27.27,\"itemType_id\":0,\"product_description\":\"PIMIENTO ROJO X KG\"},{\"ItemType_description\":\"Venta Normal\",\"ProductBarCode_id\":\"02320056000006              \",\"SaleQty\":0.842,\"SaleTrx_id\":3181303573,\"TotAmount\":45.47,\"itemType_id\":0,\"product_description\":\"CEBOLLA COMERCIAL X KG.\"},{\"ItemType_description\":\"Venta Normal\",\"ProductBarCode_id\":\"02667226000009              \",\"SaleQty\":2.0,\"SaleTrx_id\":3181303573,\"TotAmount\":4.0,\"itemType_id\":0,\"product_description\":\"BOLSA CAMISETA VERDE 45X55X17 MIC OXOBIODEGRADABLE\"},{\"ItemType_description\":\"Venta Normal\",\"ProductBarCode_id\":\"07500435139809              \",\"SaleQty\":1.0,\"SaleTrx_id\":3181303573,\"TotAmount\":157.0,\"itemType_id\":0,\"product_description\":\"JABON LIQUIDO P/ROPA ARIEL POUCH X 800 CC\"},{\"ItemType_description\":\"Venta Normal\",\"ProductBarCode_id\":\"07622300868543              \",\"SaleQty\":2.0,\"SaleTrx_id\":3181303573,\"TotAmount\":28.2,\"itemType_id\":0,\"product_description\":\"JUGO EN POLVO NARANJA DULCE TANG X 18 GRS\"},{\"ItemType_description\":\"Venta Normal\",\"ProductBarCode_id\":\"07790040711105              \",\"SaleQty\":1.0,\"SaleTrx_id\":3181303573,\"TotAmount\":74.0,\"itemType_id\":0,\"product_description\":\"GALLETITAS SURTIDO DIVERSION BOLSA X 400 GRS\"},{\"ItemType_description\":\"Venta Normal\",\"ProductBarCode_id\":\"07790070318343              \",\"SaleQty\":1.0,\"SaleTrx_id\":3181303573,\"TotAmount\":50.0,\"itemType_id\":0,\"product_description\":\"FIDEOS CODITOS LUCCHETTI BOLSA X 500 GRS\"},{\"ItemType_description\":\"Venta Normal\",\"ProductBarCode_id\":\"07790070411549              \",\"SaleQty\":1.0,\"SaleTrx_id\":3181303573,\"TotAmount\":74.0,\"itemType_id\":0,\"product_description\":\"REBOZADOR C/HARINA PARA PAN PREFERIDO X 500 GRS\"},{\"ItemType_description\":\"Venta Normal\",\"ProductBarCode_id\":\"07790387015218              \",\"SaleQty\":1.0,\"SaleTrx_id\":3181303573,\"TotAmount\":204.0,\"itemType_id\":0,\"product_description\":\"YERBA MATE BAJO POLVO MANANITA X 1 KG\"},{\"ItemType_description\":\"Venta Normal\",\"ProductBarCode_id\":\"07791120031564              \",\"SaleQty\":1.0,\"SaleTrx_id\":3181303573,\"TotAmount\":33.0,\"itemType_id\":0,\"product_description\":\"ARROZ LARGO FINO 00000 MOLINOS ALA BSA X 500 GRS\"},{\"ItemType_description\":\"Venta Normal\",\"ProductBarCode_id\":\"07791337560819              \",\"SaleQty\":1.0,\"SaleTrx_id\":3181303573,\"TotAmount\":105.0,\"itemType_id\":0,\"product_description\":\"YOGUR ENTERO VAINILLA YOGURISIMO SACHET X 1 KG\"},{\"ItemType_description\":\"Venta Normal\",\"ProductBarCode_id\":\"07791579001132              \",\"SaleQty\":1.0,\"SaleTrx_id\":3181303573,\"TotAmount\":49.5,\"itemType_id\":0,\"product_description\":\"PURE DE TOMATE MOLTO TETRA X 520 GRS\"},{\"ItemType_description\":\"Venta Normal\",\"ProductBarCode_id\":\"07791866001364              \",\"SaleQty\":1.0,\"SaleTrx_id\":3181303573,\"TotAmount\":86.0,\"itemType_id\":0,\"product_description\":\"MAYONESA NATURA DOY PACK X 500 CC\"},{\"ItemType_description\":\"Venta Normal\",\"ProductBarCode_id\":\"07791905000921              \",\"SaleQty\":1.0,\"SaleTrx_id\":3181303573,\"TotAmount\":116.0,\"itemType_id\":0,\"product_description\":\"SUAVIZANTE P/ROPA PREMIUM QUERUBIN DP X 900 CC\"},{\"ItemType_description\":\"Venta Normal\",\"ProductBarCode_id\":\"07792200000159              \",\"SaleQty\":1.0,\"SaleTrx_id\":3181303573,\"TotAmount\":46.6,\"itemType_id\":0,\"product_description\":\"BIZCOCHOS DE GRASA 9 DE ORO BOLSA X 200 GRS\"},{\"ItemType_description\":\"Venta Normal\",\"ProductBarCode_id\":\"07792878000017              \",\"SaleQty\":1.0,\"SaleTrx_id\":3181303573,\"TotAmount\":50.0,\"itemType_id\":0,\"product_description\":\"AZUCAR BLANCA MOLIDA DOMINO BOLSA X 1 KG\"},{\"ItemType_description\":\"Venta Normal\",\"ProductBarCode_id\":\"07792900000206              \",\"SaleQty\":1.0,\"SaleTrx_id\":3181303573,\"TotAmount\":35.0,\"itemType_id\":0,\"product_description\":\"(PC) SAL FINA DOS ANCLAS PAQUETE X 500 GRS\"},{\"ItemType_description\":\"Venta Normal\",\"ProductBarCode_id\":\"07794000597525              \",\"SaleQty\":1.0,\"SaleTrx_id\":3181303573,\"TotAmount\":75.0,\"itemType_id\":0,\"product_description\":\"(PC)CALDO DE GALLINA CUBOS KNORR CJ X 12 UNI\"},{\"ItemType_description\":\"Venta Normal\",\"ProductBarCode_id\":\"07794520441186              \",\"SaleQty\":1.0,\"SaleTrx_id\":3181303573,\"TotAmount\":114.0,\"itemType_id\":0,\"product_description\":\"PAPAS FRITAS KRACHITOS BOLSA X 180 GRS\"},{\"ItemType_description\":\"Venta Normal\",\"ProductBarCode_id\":\"07798060850026              \",\"SaleQty\":1.0,\"SaleTrx_id\":3181303573,\"TotAmount\":94.0,\"itemType_id\":0,\"product_description\":\"MANTECA CALIDAD EXTRA TONADITA X 200 GRS\"},{\"ItemType_description\":\"Venta Normal\",\"ProductBarCode_id\":\"07798159718978              \",\"SaleQty\":1.0,\"SaleTrx_id\":3181303573,\"TotAmount\":59.0,\"itemType_id\":0,\"product_description\":\"PAPEL HIGIENICO H/ SIMPLE CARREFOUR 4 X 30 MTS\"},{\"ItemType_description\":\"Venta Normal\",\"ProductBarCode_id\":\"07896004005966              \",\"SaleQty\":1.0,\"SaleTrx_id\":3181303573,\"TotAmount\":103.0,\"itemType_id\":0,\"product_description\":\"COPOS DE MAIZ AZUCARADOS ZUCARITAS BOLSA X 220 GRS\"}],\"payment\":[{\"CCardAuthorization_id\":\"005882\",\"CreditCardNbr_id\":\"585274******6930\",\"DocumentTender_id\":22651823,\"F_TenderAmount\":2390.51,\"SaleTrx_id\":3181303573,\"SubTender_Description\":\"BSF Visa\",\"Tender_Description\":\"Tarjeta\"}]}";
		return respuesta;*/
	}

	@Override
	public Transaccion[] getTransacciones(Consulta request) throws GeneralSecurityException {
		logger.info("getTransacciones() ¡Ha comenzado a realizar la consulta!");
		this.getMediosPago();
		RestTemplate rest = armarConexion();
		tipoMedio = MediaType.APPLICATION_JSON;
		HttpEntity<Consulta> entidad = new HttpEntity(request,armarCabecera(true));
		ResponseEntity<String> response = rest.exchange(crearUrl(this.dataTransacciones,false),HttpMethod.POST,entidad,String.class);
		Transaccion[] respuesta = new Gson().fromJson(response.getBody(), Transaccion[].class);
		/*String json = "[{\"SaleTrx_id\":3181303539,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"20:04:02\",\"Checkout_id\":10,\"PosEvent_id\":10000249,\"Tender_Description\":\"Efectivo\",\"total_amount\":147.0,\"DocumentTender_id\":0,\"AffinityCardNbr_id\":\"33557715\"},{\"SaleTrx_id\":3181303540,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"20:03:04\",\"Checkout_id\":10,\"PosEvent_id\":10000248,\"Tender_Description\":\"Tarjeta\",\"total_amount\":1499.0,\"DocumentTender_id\":40395147,\"AffinityCardNbr_id\":\"40395147\"},{\"SaleTrx_id\":3181303541,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"20:01:00\",\"Checkout_id\":10,\"PosEvent_id\":10000247,\"Tender_Description\":\"Tarjeta\",\"total_amount\":189.2,\"DocumentTender_id\":40395147,\"AffinityCardNbr_id\":\"40395147\"},{\"SaleTrx_id\":3181303542,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"19:59:37\",\"Checkout_id\":10,\"PosEvent_id\":10000246,\"Tender_Description\":\"Tarjeta\",\"total_amount\":847.0,\"DocumentTender_id\":22241559,\"AffinityCardNbr_id\":\"22241559\"},{\"SaleTrx_id\":3181303543,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"19:58:06\",\"Checkout_id\":10,\"PosEvent_id\":10000245,\"Tender_Description\":\"Tarjeta\",\"total_amount\":257.52,\"DocumentTender_id\":35261404,\"AffinityCardNbr_id\":\"35261404\"},{\"SaleTrx_id\":3181303544,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"19:57:00\",\"Checkout_id\":10,\"PosEvent_id\":10000244,\"Tender_Description\":\"Efectivo\",\"total_amount\":378.0,\"DocumentTender_id\":0,\"AffinityCardNbr_id\":\"\"},{\"SaleTrx_id\":3181303545,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"19:55:54\",\"Checkout_id\":10,\"PosEvent_id\":10000243,\"Tender_Description\":\"Efectivo\",\"total_amount\":2300.0,\"DocumentTender_id\":0,\"AffinityCardNbr_id\":\"\"},{\"SaleTrx_id\":3181303546,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"19:55:26\",\"Checkout_id\":10,\"PosEvent_id\":10000242,\"Tender_Description\":\"Efectivo\",\"total_amount\":779.0,\"DocumentTender_id\":0,\"AffinityCardNbr_id\":\"26428500\"},{\"SaleTrx_id\":3181303547,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"19:53:14\",\"Checkout_id\":10,\"PosEvent_id\":10000241,\"Tender_Description\":\"Tarjeta\",\"total_amount\":1838.64,\"DocumentTender_id\":31495469,\"AffinityCardNbr_id\":\"31495469\"},{\"SaleTrx_id\":3181303551,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"19:44:13\",\"Checkout_id\":10,\"PosEvent_id\":10000236,\"Tender_Description\":\"Efectivo\",\"total_amount\":1600.0,\"DocumentTender_id\":0,\"AffinityCardNbr_id\":\"\"},{\"SaleTrx_id\":3181303552,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"19:42:18\",\"Checkout_id\":10,\"PosEvent_id\":10000235,\"Tender_Description\":\"Efectivo\",\"total_amount\":405.0,\"DocumentTender_id\":0,\"AffinityCardNbr_id\":\"28846226\"},{\"SaleTrx_id\":3181303553,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"19:41:04\",\"Checkout_id\":10,\"PosEvent_id\":10000234,\"Tender_Description\":\"Tarjeta\",\"total_amount\":664.99,\"DocumentTender_id\":29789740,\"AffinityCardNbr_id\":\"29789740\"},{\"SaleTrx_id\":3181303554,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"19:39:09\",\"Checkout_id\":10,\"PosEvent_id\":10000233,\"Tender_Description\":\"Efectivo\",\"total_amount\":965.0,\"DocumentTender_id\":0,\"AffinityCardNbr_id\":\"40664376\"},{\"SaleTrx_id\":3181303555,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"19:36:34\",\"Checkout_id\":10,\"PosEvent_id\":10000232,\"Tender_Description\":\"Tarjeta\",\"total_amount\":1173.06,\"DocumentTender_id\":21791270,\"AffinityCardNbr_id\":\"21791270\"},{\"SaleTrx_id\":3181303557,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"19:33:48\",\"Checkout_id\":10,\"PosEvent_id\":10000230,\"Tender_Description\":\"Tarjeta\",\"total_amount\":1178.58,\"DocumentTender_id\":40463584,\"AffinityCardNbr_id\":\"40463584\"},{\"SaleTrx_id\":3181303557,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"19:33:48\",\"Checkout_id\":10,\"PosEvent_id\":10000230,\"Tender_Description\":\"Efectivo\",\"total_amount\":1178.58,\"DocumentTender_id\":0,\"AffinityCardNbr_id\":\"40463584\"},{\"SaleTrx_id\":3181303558,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"19:30:07\",\"Checkout_id\":10,\"PosEvent_id\":10000228,\"Tender_Description\":\"Tarjeta\",\"total_amount\":1480.0,\"DocumentTender_id\":17879536,\"AffinityCardNbr_id\":\"\"},{\"SaleTrx_id\":3181303559,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"19:26:31\",\"Checkout_id\":10,\"PosEvent_id\":10000227,\"Tender_Description\":\"Tarjeta\",\"total_amount\":6.0,\"DocumentTender_id\":38918564,\"AffinityCardNbr_id\":\"\"},{\"SaleTrx_id\":3181303560,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"19:25:29\",\"Checkout_id\":10,\"PosEvent_id\":10000226,\"Tender_Description\":\"Tarjeta\",\"total_amount\":1628.03,\"DocumentTender_id\":38918564,\"AffinityCardNbr_id\":\"38918564\"},{\"SaleTrx_id\":3181303563,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"19:07:37\",\"Checkout_id\":10,\"PosEvent_id\":10000223,\"Tender_Description\":\"Tarjeta\",\"total_amount\":4.0,\"DocumentTender_id\":94070602,\"AffinityCardNbr_id\":\"\"},{\"SaleTrx_id\":3181303564,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"19:06:29\",\"Checkout_id\":10,\"PosEvent_id\":10000222,\"Tender_Description\":\"Tarjeta\",\"total_amount\":1901.9,\"DocumentTender_id\":94070602,\"AffinityCardNbr_id\":\"94070602\"},{\"SaleTrx_id\":3181303565,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"18:58:06\",\"Checkout_id\":10,\"PosEvent_id\":10000221,\"Tender_Description\":\"Efectivo\",\"total_amount\":64.0,\"DocumentTender_id\":0,\"AffinityCardNbr_id\":\"33199343\"},{\"SaleTrx_id\":3181303566,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"18:57:04\",\"Checkout_id\":10,\"PosEvent_id\":10000220,\"Tender_Description\":\"Efectivo\",\"total_amount\":881.0,\"DocumentTender_id\":0,\"AffinityCardNbr_id\":\"94764296\"},{\"SaleTrx_id\":3181303567,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"18:54:53\",\"Checkout_id\":10,\"PosEvent_id\":10000219,\"Tender_Description\":\"Efectivo\",\"total_amount\":104.0,\"DocumentTender_id\":0,\"AffinityCardNbr_id\":\"\"},{\"SaleTrx_id\":3181303568,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"18:53:23\",\"Checkout_id\":10,\"PosEvent_id\":10000218,\"Tender_Description\":\"Tarjeta\",\"total_amount\":685.46,\"DocumentTender_id\":30413352,\"AffinityCardNbr_id\":\"30413352\"},{\"SaleTrx_id\":3181303569,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"18:51:31\",\"Checkout_id\":10,\"PosEvent_id\":10000217,\"Tender_Description\":\"Efectivo\",\"total_amount\":124.0,\"DocumentTender_id\":0,\"AffinityCardNbr_id\":\"\"},{\"SaleTrx_id\":3181303570,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"18:50:42\",\"Checkout_id\":10,\"PosEvent_id\":10000216,\"Tender_Description\":\"Efectivo\",\"total_amount\":3225.0,\"DocumentTender_id\":0,\"AffinityCardNbr_id\":\"24655309\"},{\"SaleTrx_id\":3181303571,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"18:45:12\",\"Checkout_id\":10,\"PosEvent_id\":10000215,\"Tender_Description\":\"Efectivo\",\"total_amount\":2735.0,\"DocumentTender_id\":0,\"AffinityCardNbr_id\":\"21801575\"},{\"SaleTrx_id\":3181303572,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"18:35:53\",\"Checkout_id\":10,\"PosEvent_id\":10000214,\"Tender_Description\":\"Efectivo\",\"total_amount\":2.0,\"DocumentTender_id\":0,\"AffinityCardNbr_id\":\"\"},{\"SaleTrx_id\":3181303573,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"18:35:08\",\"Checkout_id\":10,\"PosEvent_id\":10000213,\"Tender_Description\":\"Tarjeta\",\"total_amount\":2390.51,\"DocumentTender_id\":22651823,\"AffinityCardNbr_id\":\"22651823\"},{\"SaleTrx_id\":3181303574,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"18:31:10\",\"Checkout_id\":10,\"PosEvent_id\":10000212,\"Tender_Description\":\"Tarjeta\",\"total_amount\":1621.78,\"DocumentTender_id\":23862995,\"AffinityCardNbr_id\":\"23862995\"},{\"SaleTrx_id\":3181303575,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"18:27:48\",\"Checkout_id\":10,\"PosEvent_id\":10000211,\"Tender_Description\":\"Tarjeta\",\"total_amount\":374.0,\"DocumentTender_id\":13808947,\"AffinityCardNbr_id\":\"14611001\"},{\"SaleTrx_id\":3181303576,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"18:26:06\",\"Checkout_id\":10,\"PosEvent_id\":10000210,\"Tender_Description\":\"Efectivo\",\"total_amount\":559.0,\"DocumentTender_id\":0,\"AffinityCardNbr_id\":\"10625408\"},{\"SaleTrx_id\":3181303578,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"18:24:01\",\"Checkout_id\":10,\"PosEvent_id\":10000208,\"Tender_Description\":\"Efectivo\",\"total_amount\":2526.0,\"DocumentTender_id\":0,\"AffinityCardNbr_id\":\"\"},{\"SaleTrx_id\":3181303579,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"18:22:10\",\"Checkout_id\":10,\"PosEvent_id\":10000207,\"Tender_Description\":\"Tarjeta\",\"total_amount\":3575.8,\"DocumentTender_id\":38703302,\"AffinityCardNbr_id\":\"38703302\"},{\"SaleTrx_id\":3181303580,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"18:18:14\",\"Checkout_id\":10,\"PosEvent_id\":10000206,\"Tender_Description\":\"Tarjeta\",\"total_amount\":8007.71,\"DocumentTender_id\":38703302,\"AffinityCardNbr_id\":\"38703302\"},{\"SaleTrx_id\":3181303581,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"18:06:14\",\"Checkout_id\":10,\"PosEvent_id\":10000205,\"Tender_Description\":\"Tarjeta\",\"total_amount\":612.68,\"DocumentTender_id\":34521704,\"AffinityCardNbr_id\":\"33021297\"},{\"SaleTrx_id\":3181303582,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"18:04:12\",\"Checkout_id\":10,\"PosEvent_id\":10000204,\"Tender_Description\":\"Efectivo\",\"total_amount\":3471.0,\"DocumentTender_id\":0,\"AffinityCardNbr_id\":\"25970238\"},{\"SaleTrx_id\":3181303583,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"18:00:40\",\"Checkout_id\":10,\"PosEvent_id\":10000203,\"Tender_Description\":\"Efectivo\",\"total_amount\":307.0,\"DocumentTender_id\":0,\"AffinityCardNbr_id\":\"40766852\"},{\"SaleTrx_id\":3181303584,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"17:59:10\",\"Checkout_id\":10,\"PosEvent_id\":10000202,\"Tender_Description\":\"Tarjeta\",\"total_amount\":3581.2,\"DocumentTender_id\":13610708,\"AffinityCardNbr_id\":\"13610708\"},{\"SaleTrx_id\":3181303586,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"17:52:47\",\"Checkout_id\":10,\"PosEvent_id\":10000200,\"Tender_Description\":\"Efectivo\",\"total_amount\":1328.0,\"DocumentTender_id\":0,\"AffinityCardNbr_id\":\"40132346\"},{\"SaleTrx_id\":3181303587,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"17:50:12\",\"Checkout_id\":10,\"PosEvent_id\":10000199,\"Tender_Description\":\"Efectivo\",\"total_amount\":404.0,\"DocumentTender_id\":0,\"AffinityCardNbr_id\":\"24310551\"},{\"SaleTrx_id\":3181303588,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"17:47:42\",\"Checkout_id\":10,\"PosEvent_id\":10000198,\"Tender_Description\":\"Efectivo\",\"total_amount\":830.0,\"DocumentTender_id\":0,\"AffinityCardNbr_id\":\"39208423\"},{\"SaleTrx_id\":3181303590,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"17:45:53\",\"Checkout_id\":10,\"PosEvent_id\":10000196,\"Tender_Description\":\"Tarjeta\",\"total_amount\":879.53,\"DocumentTender_id\":12953852,\"AffinityCardNbr_id\":\"12953852\"},{\"SaleTrx_id\":3181303591,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"17:43:17\",\"Checkout_id\":10,\"PosEvent_id\":10000195,\"Tender_Description\":\"Efectivo\",\"total_amount\":18974.0,\"DocumentTender_id\":0,\"AffinityCardNbr_id\":\"17287593\"},{\"SaleTrx_id\":3181303593,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"17:29:18\",\"Checkout_id\":10,\"PosEvent_id\":10000193,\"Tender_Description\":\"Tarjeta\",\"total_amount\":5098.5,\"DocumentTender_id\":13623180,\"AffinityCardNbr_id\":\"13623180\"},{\"SaleTrx_id\":3181303593,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"17:29:18\",\"Checkout_id\":10,\"PosEvent_id\":10000193,\"Tender_Description\":\"Efectivo\",\"total_amount\":5098.5,\"DocumentTender_id\":0,\"AffinityCardNbr_id\":\"13623180\"},{\"SaleTrx_id\":3181303594,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"17:23:26\",\"Checkout_id\":10,\"PosEvent_id\":10000192,\"Tender_Description\":\"Tarjeta\",\"total_amount\":2498.1,\"DocumentTender_id\":34077992,\"AffinityCardNbr_id\":\"34077992\"},{\"SaleTrx_id\":3181303595,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"17:20:52\",\"Checkout_id\":10,\"PosEvent_id\":10000191,\"Tender_Description\":\"Tarjeta\",\"total_amount\":1358.0,\"DocumentTender_id\":34077992,\"AffinityCardNbr_id\":\"34077992\"},{\"SaleTrx_id\":3181303597,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"17:17:45\",\"Checkout_id\":10,\"PosEvent_id\":10000189,\"Tender_Description\":\"Tarjeta\",\"total_amount\":801.36,\"DocumentTender_id\":11836875,\"AffinityCardNbr_id\":\"\"},{\"SaleTrx_id\":3181303598,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"17:15:08\",\"Checkout_id\":10,\"PosEvent_id\":10000187,\"Tender_Description\":\"Tarjeta\",\"total_amount\":215.02,\"DocumentTender_id\":14897871,\"AffinityCardNbr_id\":\"14897871\"},{\"SaleTrx_id\":3181303599,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"17:13:37\",\"Checkout_id\":10,\"PosEvent_id\":10000186,\"Tender_Description\":\"Efectivo\",\"total_amount\":952.0,\"DocumentTender_id\":0,\"AffinityCardNbr_id\":\"11564340\"},{\"SaleTrx_id\":3181303600,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"17:11:18\",\"Checkout_id\":10,\"PosEvent_id\":10000185,\"Tender_Description\":\"Tarjeta\",\"total_amount\":2250.02,\"DocumentTender_id\":28725764,\"AffinityCardNbr_id\":\"28725764\"},{\"SaleTrx_id\":3181303601,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"17:06:09\",\"Checkout_id\":10,\"PosEvent_id\":10000184,\"Tender_Description\":\"Efectivo\",\"total_amount\":3000.0,\"DocumentTender_id\":0,\"AffinityCardNbr_id\":\"\"},{\"SaleTrx_id\":3181303602,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"17:05:21\",\"Checkout_id\":10,\"PosEvent_id\":10000183,\"Tender_Description\":\"Tarjeta\",\"total_amount\":5045.41,\"DocumentTender_id\":38146247,\"AffinityCardNbr_id\":\"34545540\"},{\"SaleTrx_id\":3181303603,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"17:02:42\",\"Checkout_id\":10,\"PosEvent_id\":10000182,\"Tender_Description\":\"Tarjeta\",\"total_amount\":138.4,\"DocumentTender_id\":38146247,\"AffinityCardNbr_id\":\"34545540\"},{\"SaleTrx_id\":3181303604,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"17:01:53\",\"Checkout_id\":10,\"PosEvent_id\":10000181,\"Tender_Description\":\"Efectivo\",\"total_amount\":49.0,\"DocumentTender_id\":0,\"AffinityCardNbr_id\":\"34545540\"},{\"SaleTrx_id\":3181303605,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"17:00:57\",\"Checkout_id\":10,\"PosEvent_id\":10000180,\"Tender_Description\":\"Efectivo\",\"total_amount\":199.85,\"DocumentTender_id\":0,\"AffinityCardNbr_id\":\"33692614\"},{\"SaleTrx_id\":3181303606,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"16:57:26\",\"Checkout_id\":10,\"PosEvent_id\":10000179,\"Tender_Description\":\"Tarjeta\",\"total_amount\":1319.08,\"DocumentTender_id\":23915780,\"AffinityCardNbr_id\":\"23033406\"},{\"SaleTrx_id\":3181303607,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"16:54:50\",\"Checkout_id\":10,\"PosEvent_id\":10000178,\"Tender_Description\":\"Efectivo\",\"total_amount\":1240.0,\"DocumentTender_id\":0,\"AffinityCardNbr_id\":\"41467040\"},{\"SaleTrx_id\":3181303608,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"16:53:00\",\"Checkout_id\":10,\"PosEvent_id\":10000177,\"Tender_Description\":\"Tarjeta\",\"total_amount\":5216.0,\"DocumentTender_id\":24775718,\"AffinityCardNbr_id\":\"24775718\"},{\"SaleTrx_id\":3181303608,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"16:53:00\",\"Checkout_id\":10,\"PosEvent_id\":10000177,\"Tender_Description\":\"Efectivo\",\"total_amount\":5216.0,\"DocumentTender_id\":0,\"AffinityCardNbr_id\":\"24775718\"},{\"SaleTrx_id\":3181303609,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"16:45:45\",\"Checkout_id\":10,\"PosEvent_id\":10000176,\"Tender_Description\":\"Tarjeta\",\"total_amount\":1663.65,\"DocumentTender_id\":31326442,\"AffinityCardNbr_id\":\"31326442\"},{\"SaleTrx_id\":3181303610,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"16:42:15\",\"Checkout_id\":10,\"PosEvent_id\":10000175,\"Tender_Description\":\"Tarjeta\",\"total_amount\":829.04,\"DocumentTender_id\":26305704,\"AffinityCardNbr_id\":\"26305704\"},{\"SaleTrx_id\":3181303613,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"16:38:19\",\"Checkout_id\":10,\"PosEvent_id\":10000172,\"Tender_Description\":\"Efectivo\",\"total_amount\":983.0,\"DocumentTender_id\":0,\"AffinityCardNbr_id\":\"10106342\"},{\"SaleTrx_id\":3181303614,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"16:35:56\",\"Checkout_id\":10,\"PosEvent_id\":10000170,\"Tender_Description\":\"Efectivo\",\"total_amount\":1023.0,\"DocumentTender_id\":0,\"AffinityCardNbr_id\":\"23552621\"},{\"SaleTrx_id\":3181303615,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"16:34:21\",\"Checkout_id\":10,\"PosEvent_id\":10000169,\"Tender_Description\":\"Tarjeta\",\"total_amount\":962.19,\"DocumentTender_id\":27825930,\"AffinityCardNbr_id\":\"1027825930\"},{\"SaleTrx_id\":3181303616,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"16:31:50\",\"Checkout_id\":10,\"PosEvent_id\":10000168,\"Tender_Description\":\"Tarjeta\",\"total_amount\":8911.08,\"DocumentTender_id\":34230002,\"AffinityCardNbr_id\":\"14341555\"},{\"SaleTrx_id\":3181303619,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"16:05:17\",\"Checkout_id\":10,\"PosEvent_id\":10000165,\"Tender_Description\":\"Tarjeta\",\"total_amount\":858.3,\"DocumentTender_id\":40892597,\"AffinityCardNbr_id\":\"40892597\"},{\"SaleTrx_id\":3181303620,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"16:02:23\",\"Checkout_id\":10,\"PosEvent_id\":10000164,\"Tender_Description\":\"Efectivo\",\"total_amount\":460.0,\"DocumentTender_id\":0,\"AffinityCardNbr_id\":\"93085945\"},{\"SaleTrx_id\":3181303621,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"15:57:27\",\"Checkout_id\":10,\"PosEvent_id\":10000161,\"Tender_Description\":\"Tarjeta\",\"total_amount\":1278.12,\"DocumentTender_id\":4983915,\"AffinityCardNbr_id\":\"6420326\"},{\"SaleTrx_id\":3181303622,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"15:52:53\",\"Checkout_id\":10,\"PosEvent_id\":10000160,\"Tender_Description\":\"Efectivo\",\"total_amount\":3464.0,\"DocumentTender_id\":0,\"AffinityCardNbr_id\":\"42459570\"},{\"SaleTrx_id\":3181303624,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"15:45:52\",\"Checkout_id\":10,\"PosEvent_id\":10000158,\"Tender_Description\":\"Tarjeta\",\"total_amount\":3381.03,\"DocumentTender_id\":37246112,\"AffinityCardNbr_id\":\"37246112\"},{\"SaleTrx_id\":3181303625,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"15:41:16\",\"Checkout_id\":10,\"PosEvent_id\":10000157,\"Tender_Description\":\"Efectivo\",\"total_amount\":111.0,\"DocumentTender_id\":0,\"AffinityCardNbr_id\":\"33119187\"},{\"SaleTrx_id\":3181303626,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"15:40:26\",\"Checkout_id\":10,\"PosEvent_id\":10000156,\"Tender_Description\":\"Tarjeta\",\"total_amount\":333.5,\"DocumentTender_id\":33335640,\"AffinityCardNbr_id\":\"33335640\"},{\"SaleTrx_id\":3181303627,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"15:37:12\",\"Checkout_id\":10,\"PosEvent_id\":10000155,\"Tender_Description\":\"Efectivo\",\"total_amount\":1738.0,\"DocumentTender_id\":0,\"AffinityCardNbr_id\":\"17317887\"},{\"SaleTrx_id\":3181303628,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"15:33:44\",\"Checkout_id\":10,\"PosEvent_id\":10000154,\"Tender_Description\":\"Tarjeta\",\"total_amount\":247.0,\"DocumentTender_id\":32521146,\"AffinityCardNbr_id\":\"32521146\"},{\"SaleTrx_id\":3181303629,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"15:31:07\",\"Checkout_id\":10,\"PosEvent_id\":10000153,\"Tender_Description\":\"Efectivo\",\"total_amount\":252.0,\"DocumentTender_id\":0,\"AffinityCardNbr_id\":\"41739038\"},{\"SaleTrx_id\":3181303630,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"15:29:46\",\"Checkout_id\":10,\"PosEvent_id\":10000152,\"Tender_Description\":\"Efectivo\",\"total_amount\":1709.0,\"DocumentTender_id\":0,\"AffinityCardNbr_id\":\"12203728\"},{\"SaleTrx_id\":3181303632,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"15:27:54\",\"Checkout_id\":10,\"PosEvent_id\":10000150,\"Tender_Description\":\"Efectivo\",\"total_amount\":2252.0,\"DocumentTender_id\":0,\"AffinityCardNbr_id\":\"92785258\"},{\"SaleTrx_id\":3181303635,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"15:20:00\",\"Checkout_id\":10,\"PosEvent_id\":10000147,\"Tender_Description\":\"Efectivo\",\"total_amount\":122.0,\"DocumentTender_id\":0,\"AffinityCardNbr_id\":\"29009193\"},{\"SaleTrx_id\":3181303636,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"15:18:32\",\"Checkout_id\":10,\"PosEvent_id\":10000146,\"Tender_Description\":\"Tarjeta\",\"total_amount\":711.0,\"DocumentTender_id\":32487746,\"AffinityCardNbr_id\":\"32487746\"},{\"SaleTrx_id\":3181303637,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"15:15:40\",\"Checkout_id\":10,\"PosEvent_id\":10000145,\"Tender_Description\":\"Efectivo\",\"total_amount\":234.0,\"DocumentTender_id\":0,\"AffinityCardNbr_id\":\"39517513\"},{\"SaleTrx_id\":3181303638,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"15:15:00\",\"Checkout_id\":10,\"PosEvent_id\":10000144,\"Tender_Description\":\"Efectivo\",\"total_amount\":96.0,\"DocumentTender_id\":0,\"AffinityCardNbr_id\":\"\"},{\"SaleTrx_id\":3181303639,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"15:14:10\",\"Checkout_id\":10,\"PosEvent_id\":10000143,\"Tender_Description\":\"Efectivo\",\"total_amount\":628.0,\"DocumentTender_id\":0,\"AffinityCardNbr_id\":\"5099338\"},{\"SaleTrx_id\":3181303640,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"15:12:03\",\"Checkout_id\":10,\"PosEvent_id\":10000142,\"Tender_Description\":\"Efectivo\",\"total_amount\":505.0,\"DocumentTender_id\":0,\"AffinityCardNbr_id\":\"32403891\"},{\"SaleTrx_id\":3181303640,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"15:12:03\",\"Checkout_id\":10,\"PosEvent_id\":10000142,\"Tender_Description\":\"Tarjeta\",\"total_amount\":505.0,\"DocumentTender_id\":32403891,\"AffinityCardNbr_id\":\"32403891\"},{\"SaleTrx_id\":3181303641,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"15:10:12\",\"Checkout_id\":10,\"PosEvent_id\":10000141,\"Tender_Description\":\"Efectivo\",\"total_amount\":1453.0,\"DocumentTender_id\":0,\"AffinityCardNbr_id\":\"32403891\"},{\"SaleTrx_id\":3181303642,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"15:06:05\",\"Checkout_id\":10,\"PosEvent_id\":10000140,\"Tender_Description\":\"Tarjeta\",\"total_amount\":862.05,\"DocumentTender_id\":94236767,\"AffinityCardNbr_id\":\"94236767\"},{\"SaleTrx_id\":3181303643,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"15:02:00\",\"Checkout_id\":10,\"PosEvent_id\":10000139,\"Tender_Description\":\"Efectivo\",\"total_amount\":144.0,\"DocumentTender_id\":0,\"AffinityCardNbr_id\":\"\"},{\"SaleTrx_id\":3181303644,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"15:01:20\",\"Checkout_id\":10,\"PosEvent_id\":10000138,\"Tender_Description\":\"Tarjeta\",\"total_amount\":3482.56,\"DocumentTender_id\":94430399,\"AffinityCardNbr_id\":\"94430399\"},{\"SaleTrx_id\":3181303648,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"14:47:20\",\"Checkout_id\":10,\"PosEvent_id\":10000134,\"Tender_Description\":\"Efectivo\",\"total_amount\":2874.0,\"DocumentTender_id\":0,\"AffinityCardNbr_id\":\"4584361\"},{\"SaleTrx_id\":3181303649,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"14:42:34\",\"Checkout_id\":10,\"PosEvent_id\":10000133,\"Tender_Description\":\"Efectivo\",\"total_amount\":1367.0,\"DocumentTender_id\":0,\"AffinityCardNbr_id\":\"22948161\"},{\"SaleTrx_id\":3181303650,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"14:39:07\",\"Checkout_id\":10,\"PosEvent_id\":10000132,\"Tender_Description\":\"Tarjeta\",\"total_amount\":2761.52,\"DocumentTender_id\":27333745,\"AffinityCardNbr_id\":\"27333745\"},{\"SaleTrx_id\":3181303651,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"14:35:00\",\"Checkout_id\":10,\"PosEvent_id\":10000131,\"Tender_Description\":\"Efectivo\",\"total_amount\":1806.0,\"DocumentTender_id\":0,\"AffinityCardNbr_id\":\"\"},{\"SaleTrx_id\":3181303652,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"14:30:53\",\"Checkout_id\":10,\"PosEvent_id\":10000130,\"Tender_Description\":\"Efectivo\",\"total_amount\":2110.0,\"DocumentTender_id\":0,\"AffinityCardNbr_id\":\"26618553\"},{\"SaleTrx_id\":3181303654,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"14:25:22\",\"Checkout_id\":10,\"PosEvent_id\":10000128,\"Tender_Description\":\"Tarjeta\",\"total_amount\":1236.8,\"DocumentTender_id\":26088144,\"AffinityCardNbr_id\":\"26088144\"},{\"SaleTrx_id\":3181303655,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"14:21:06\",\"Checkout_id\":10,\"PosEvent_id\":10000127,\"Tender_Description\":\"Efectivo\",\"total_amount\":1232.0,\"DocumentTender_id\":0,\"AffinityCardNbr_id\":\"5637638\"},{\"SaleTrx_id\":3181303656,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"14:18:49\",\"Checkout_id\":10,\"PosEvent_id\":10000126,\"Tender_Description\":\"Efectivo\",\"total_amount\":862.0,\"DocumentTender_id\":0,\"AffinityCardNbr_id\":\"41133586\"},{\"SaleTrx_id\":3181303657,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"14:16:54\",\"Checkout_id\":10,\"PosEvent_id\":10000125,\"Tender_Description\":\"Tarjeta\",\"total_amount\":1445.6,\"DocumentTender_id\":15072233,\"AffinityCardNbr_id\":\"15072233\"},{\"SaleTrx_id\":3181303658,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"14:14:08\",\"Checkout_id\":10,\"PosEvent_id\":10000124,\"Tender_Description\":\"Efectivo\",\"total_amount\":10000.0,\"DocumentTender_id\":0,\"AffinityCardNbr_id\":\"\"},{\"SaleTrx_id\":3181303659,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"14:11:38\",\"Checkout_id\":10,\"PosEvent_id\":10000123,\"Tender_Description\":\"Efectivo\",\"total_amount\":2.0,\"DocumentTender_id\":0,\"AffinityCardNbr_id\":\"\"},{\"SaleTrx_id\":3181303660,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"14:09:58\",\"Checkout_id\":10,\"PosEvent_id\":10000122,\"Tender_Description\":\"Tarjeta\",\"total_amount\":0.01,\"DocumentTender_id\":38918328,\"AffinityCardNbr_id\":\"\"},{\"SaleTrx_id\":3181303661,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"14:09:05\",\"Checkout_id\":10,\"PosEvent_id\":10000121,\"Tender_Description\":\"Tarjeta\",\"total_amount\":60.6,\"DocumentTender_id\":38918328,\"AffinityCardNbr_id\":\"\"},{\"SaleTrx_id\":3181303662,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"14:07:39\",\"Checkout_id\":10,\"PosEvent_id\":10000120,\"Tender_Description\":\"Efectivo\",\"total_amount\":614.0,\"DocumentTender_id\":0,\"AffinityCardNbr_id\":\"93937407\"},{\"SaleTrx_id\":3181303664,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"14:05:52\",\"Checkout_id\":10,\"PosEvent_id\":10000118,\"Tender_Description\":\"Efectivo\",\"total_amount\":4650.44,\"DocumentTender_id\":0,\"AffinityCardNbr_id\":\"28546930\"},{\"SaleTrx_id\":3181303664,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"14:05:52\",\"Checkout_id\":10,\"PosEvent_id\":10000118,\"Tender_Description\":\"Tarjeta\",\"total_amount\":4650.44,\"DocumentTender_id\":28546930,\"AffinityCardNbr_id\":\"28546930\"},{\"SaleTrx_id\":3181303665,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"13:59:05\",\"Checkout_id\":10,\"PosEvent_id\":10000117,\"Tender_Description\":\"Efectivo\",\"total_amount\":560.0,\"DocumentTender_id\":0,\"AffinityCardNbr_id\":\"42570953\"},{\"SaleTrx_id\":3181303666,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"13:56:53\",\"Checkout_id\":10,\"PosEvent_id\":10000116,\"Tender_Description\":\"Efectivo\",\"total_amount\":317.0,\"DocumentTender_id\":0,\"AffinityCardNbr_id\":\"\"},{\"SaleTrx_id\":3181303667,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"13:55:18\",\"Checkout_id\":10,\"PosEvent_id\":10000115,\"Tender_Description\":\"Tarjeta\",\"total_amount\":405.45,\"DocumentTender_id\":28288420,\"AffinityCardNbr_id\":\"28288420\"},{\"SaleTrx_id\":3181303668,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"13:52:57\",\"Checkout_id\":10,\"PosEvent_id\":10000114,\"Tender_Description\":\"Efectivo\",\"total_amount\":2399.0,\"DocumentTender_id\":0,\"AffinityCardNbr_id\":\"35588976\"},{\"SaleTrx_id\":3181303669,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"13:50:01\",\"Checkout_id\":10,\"PosEvent_id\":10000113,\"Tender_Description\":\"Tarjeta\",\"total_amount\":984.03,\"DocumentTender_id\":35588976,\"AffinityCardNbr_id\":\"35588976\"},{\"SaleTrx_id\":3181303670,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"13:47:57\",\"Checkout_id\":10,\"PosEvent_id\":10000112,\"Tender_Description\":\"Efectivo\",\"total_amount\":134.0,\"DocumentTender_id\":0,\"AffinityCardNbr_id\":\"41067559\"},{\"SaleTrx_id\":3181303671,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"13:46:11\",\"Checkout_id\":10,\"PosEvent_id\":10000111,\"Tender_Description\":\"Tarjeta\",\"total_amount\":1849.47,\"DocumentTender_id\":41067559,\"AffinityCardNbr_id\":\"41067559\"},{\"SaleTrx_id\":3181303671,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"13:46:11\",\"Checkout_id\":10,\"PosEvent_id\":10000111,\"Tender_Description\":\"Efectivo\",\"total_amount\":1849.47,\"DocumentTender_id\":0,\"AffinityCardNbr_id\":\"41067559\"},{\"SaleTrx_id\":3181303672,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"13:41:27\",\"Checkout_id\":10,\"PosEvent_id\":10000110,\"Tender_Description\":\"Efectivo\",\"total_amount\":2458.0,\"DocumentTender_id\":0,\"AffinityCardNbr_id\":\"39149931\"},{\"SaleTrx_id\":3181303673,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"13:36:15\",\"Checkout_id\":10,\"PosEvent_id\":10000109,\"Tender_Description\":\"Efectivo\",\"total_amount\":601.87,\"DocumentTender_id\":0,\"AffinityCardNbr_id\":\"35561805\"},{\"SaleTrx_id\":3181303674,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"13:34:28\",\"Checkout_id\":10,\"PosEvent_id\":10000108,\"Tender_Description\":\"Tarjeta\",\"total_amount\":764.0,\"DocumentTender_id\":18161072,\"AffinityCardNbr_id\":\"0933780\"},{\"SaleTrx_id\":3181303675,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"13:32:19\",\"Checkout_id\":10,\"PosEvent_id\":10000107,\"Tender_Description\":\"Tarjeta\",\"total_amount\":5362.28,\"DocumentTender_id\":29461451,\"AffinityCardNbr_id\":\"29461451\"},{\"SaleTrx_id\":3181303676,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"13:30:34\",\"Checkout_id\":10,\"PosEvent_id\":10000106,\"Tender_Description\":\"Efectivo\",\"total_amount\":2603.0,\"DocumentTender_id\":0,\"AffinityCardNbr_id\":\"31075497\"},{\"SaleTrx_id\":3181303678,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"13:24:00\",\"Checkout_id\":10,\"PosEvent_id\":10000104,\"Tender_Description\":\"Efectivo\",\"total_amount\":582.0,\"DocumentTender_id\":0,\"AffinityCardNbr_id\":\"4566168\"},{\"SaleTrx_id\":3181303679,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"13:22:25\",\"Checkout_id\":10,\"PosEvent_id\":10000103,\"Tender_Description\":\"Efectivo\",\"total_amount\":925.0,\"DocumentTender_id\":0,\"AffinityCardNbr_id\":\"\"},{\"SaleTrx_id\":3181303680,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"13:20:42\",\"Checkout_id\":10,\"PosEvent_id\":10000102,\"Tender_Description\":\"Tarjeta\",\"total_amount\":3528.06,\"DocumentTender_id\":35561805,\"AffinityCardNbr_id\":\"35561805\"},{\"SaleTrx_id\":3181303681,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"13:17:10\",\"Checkout_id\":10,\"PosEvent_id\":10000101,\"Tender_Description\":\"Tarjeta\",\"total_amount\":2044.0,\"DocumentTender_id\":34586741,\"AffinityCardNbr_id\":\"34586741\"},{\"SaleTrx_id\":3181303682,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"13:14:02\",\"Checkout_id\":10,\"PosEvent_id\":10000100,\"Tender_Description\":\"Efectivo\",\"total_amount\":625.65,\"DocumentTender_id\":0,\"AffinityCardNbr_id\":\"25871092\"},{\"SaleTrx_id\":3181303682,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"13:14:02\",\"Checkout_id\":10,\"PosEvent_id\":10000100,\"Tender_Description\":\"Credit Voucher\",\"total_amount\":625.65,\"DocumentTender_id\":0,\"AffinityCardNbr_id\":\"25871092\"},{\"SaleTrx_id\":3181303683,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"13:11:49\",\"Checkout_id\":10,\"PosEvent_id\":10000099,\"Tender_Description\":\"Efectivo\",\"total_amount\":1000.0,\"DocumentTender_id\":0,\"AffinityCardNbr_id\":\"\"},{\"SaleTrx_id\":3181303684,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"13:11:01\",\"Checkout_id\":10,\"PosEvent_id\":10000098,\"Tender_Description\":\"Tarjeta\",\"total_amount\":701.29,\"DocumentTender_id\":12713060,\"AffinityCardNbr_id\":\"12713060\"},{\"SaleTrx_id\":3181303685,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"13:08:31\",\"Checkout_id\":10,\"PosEvent_id\":10000097,\"Tender_Description\":\"Efectivo\",\"total_amount\":696.0,\"DocumentTender_id\":0,\"AffinityCardNbr_id\":\"41675166\"},{\"SaleTrx_id\":3181303686,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"13:07:13\",\"Checkout_id\":10,\"PosEvent_id\":10000096,\"Tender_Description\":\"Efectivo\",\"total_amount\":572.6,\"DocumentTender_id\":0,\"AffinityCardNbr_id\":\"\"},{\"SaleTrx_id\":3181303687,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"13:05:46\",\"Checkout_id\":10,\"PosEvent_id\":10000095,\"Tender_Description\":\"T. Posnet\",\"total_amount\":212.0,\"DocumentTender_id\":0,\"AffinityCardNbr_id\":\"35232704\"},{\"SaleTrx_id\":3181303689,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"12:55:01\",\"Checkout_id\":10,\"PosEvent_id\":10000093,\"Tender_Description\":\"Efectivo\",\"total_amount\":2334.0,\"DocumentTender_id\":0,\"AffinityCardNbr_id\":\"14418122\"},{\"SaleTrx_id\":3181303689,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"12:55:01\",\"Checkout_id\":10,\"PosEvent_id\":10000093,\"Tender_Description\":\"Credit Voucher\",\"total_amount\":2334.0,\"DocumentTender_id\":0,\"AffinityCardNbr_id\":\"14418122\"},{\"SaleTrx_id\":3181303690,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"12:53:18\",\"Checkout_id\":10,\"PosEvent_id\":10000092,\"Tender_Description\":\"Tarjeta\",\"total_amount\":570.7,\"DocumentTender_id\":18463105,\"AffinityCardNbr_id\":\"18463105\"},{\"SaleTrx_id\":3181303691,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"12:50:02\",\"Checkout_id\":10,\"PosEvent_id\":10000090,\"Tender_Description\":\"Tarjeta\",\"total_amount\":0.01,\"DocumentTender_id\":30663718,\"AffinityCardNbr_id\":\"\"},{\"SaleTrx_id\":3181303692,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"12:48:56\",\"Checkout_id\":10,\"PosEvent_id\":10000089,\"Tender_Description\":\"Efectivo\",\"total_amount\":2955.0,\"DocumentTender_id\":0,\"AffinityCardNbr_id\":\"\"},{\"SaleTrx_id\":3181303692,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"12:48:56\",\"Checkout_id\":10,\"PosEvent_id\":10000089,\"Tender_Description\":\"Credit Voucher\",\"total_amount\":2955.0,\"DocumentTender_id\":0,\"AffinityCardNbr_id\":\"\"},{\"SaleTrx_id\":3181303693,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"12:40:43\",\"Checkout_id\":10,\"PosEvent_id\":10000088,\"Tender_Description\":\"Tarjeta\",\"total_amount\":2090.86,\"DocumentTender_id\":5481735,\"AffinityCardNbr_id\":\"5461735\"},{\"SaleTrx_id\":3181303697,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"11:55:44\",\"Checkout_id\":10,\"PosEvent_id\":10000084,\"Tender_Description\":\"Efectivo\",\"total_amount\":349.0,\"DocumentTender_id\":0,\"AffinityCardNbr_id\":\"93944675\"},{\"SaleTrx_id\":3181303698,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"11:54:11\",\"Checkout_id\":10,\"PosEvent_id\":10000083,\"Tender_Description\":\"Efectivo\",\"total_amount\":735.0,\"DocumentTender_id\":0,\"AffinityCardNbr_id\":\"36663151\"},{\"SaleTrx_id\":3181303700,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"11:50:38\",\"Checkout_id\":10,\"PosEvent_id\":10000081,\"Tender_Description\":\"Efectivo\",\"total_amount\":1124.0,\"DocumentTender_id\":0,\"AffinityCardNbr_id\":\"6878315\"},{\"SaleTrx_id\":3181303701,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"11:47:20\",\"Checkout_id\":10,\"PosEvent_id\":10000080,\"Tender_Description\":\"Efectivo\",\"total_amount\":1080.0,\"DocumentTender_id\":0,\"AffinityCardNbr_id\":\"31881414\"},{\"SaleTrx_id\":3181303702,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"11:45:07\",\"Checkout_id\":10,\"PosEvent_id\":10000079,\"Tender_Description\":\"Tarjeta\",\"total_amount\":380.01,\"DocumentTender_id\":35428261,\"AffinityCardNbr_id\":\"\"},{\"SaleTrx_id\":3181303703,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"11:42:15\",\"Checkout_id\":10,\"PosEvent_id\":10000078,\"Tender_Description\":\"Efectivo\",\"total_amount\":2824.76,\"DocumentTender_id\":0,\"AffinityCardNbr_id\":\"\"},{\"SaleTrx_id\":3181303704,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"11:39:38\",\"Checkout_id\":10,\"PosEvent_id\":10000076,\"Tender_Description\":\"Efectivo\",\"total_amount\":784.0,\"DocumentTender_id\":0,\"AffinityCardNbr_id\":\"13933862\"},{\"SaleTrx_id\":3181303705,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"11:36:27\",\"Checkout_id\":10,\"PosEvent_id\":10000075,\"Tender_Description\":\"Tarjeta\",\"total_amount\":3612.69,\"DocumentTender_id\":14888820,\"AffinityCardNbr_id\":\"\"},{\"SaleTrx_id\":3181303706,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"11:29:01\",\"Checkout_id\":10,\"PosEvent_id\":10000073,\"Tender_Description\":\"Efectivo\",\"total_amount\":866.0,\"DocumentTender_id\":0,\"AffinityCardNbr_id\":\"16824658\"},{\"SaleTrx_id\":3181303707,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"11:27:03\",\"Checkout_id\":10,\"PosEvent_id\":10000072,\"Tender_Description\":\"Efectivo\",\"total_amount\":1325.0,\"DocumentTender_id\":0,\"AffinityCardNbr_id\":\"12937593\"},{\"SaleTrx_id\":3181303709,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"11:24:00\",\"Checkout_id\":10,\"PosEvent_id\":10000070,\"Tender_Description\":\"Tarjeta\",\"total_amount\":701.07,\"DocumentTender_id\":28162056,\"AffinityCardNbr_id\":\"28162056\"},{\"SaleTrx_id\":3181303710,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"11:22:27\",\"Checkout_id\":10,\"PosEvent_id\":10000069,\"Tender_Description\":\"Tarjeta\",\"total_amount\":3056.65,\"DocumentTender_id\":28162056,\"AffinityCardNbr_id\":\"28162056\"},{\"SaleTrx_id\":3181303711,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"11:16:12\",\"Checkout_id\":10,\"PosEvent_id\":10000066,\"Tender_Description\":\"Efectivo\",\"total_amount\":291.0,\"DocumentTender_id\":0,\"AffinityCardNbr_id\":\"92163720\"},{\"SaleTrx_id\":3181303712,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"11:14:54\",\"Checkout_id\":10,\"PosEvent_id\":10000065,\"Tender_Description\":\"Tarjeta\",\"total_amount\":6145.84,\"DocumentTender_id\":40090676,\"AffinityCardNbr_id\":\"16197233\"},{\"SaleTrx_id\":3181303712,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"11:14:54\",\"Checkout_id\":10,\"PosEvent_id\":10000065,\"Tender_Description\":\"Efectivo\",\"total_amount\":6145.84,\"DocumentTender_id\":0,\"AffinityCardNbr_id\":\"16197233\"},{\"SaleTrx_id\":3181303713,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"11:06:22\",\"Checkout_id\":10,\"PosEvent_id\":10000064,\"Tender_Description\":\"Efectivo\",\"total_amount\":2250.0,\"DocumentTender_id\":0,\"AffinityCardNbr_id\":\"\"},{\"SaleTrx_id\":3181303714,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"11:05:45\",\"Checkout_id\":10,\"PosEvent_id\":10000063,\"Tender_Description\":\"Tarjeta\",\"total_amount\":810.0,\"DocumentTender_id\":28021693,\"AffinityCardNbr_id\":\"28021693\"},{\"SaleTrx_id\":3181303715,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"11:03:51\",\"Checkout_id\":10,\"PosEvent_id\":10000062,\"Tender_Description\":\"Efectivo\",\"total_amount\":1067.0,\"DocumentTender_id\":0,\"AffinityCardNbr_id\":\"31881690\"},{\"SaleTrx_id\":3181303716,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"11:01:48\",\"Checkout_id\":10,\"PosEvent_id\":10000061,\"Tender_Description\":\"Efectivo\",\"total_amount\":239.0,\"DocumentTender_id\":0,\"AffinityCardNbr_id\":\"\"},{\"SaleTrx_id\":3181303717,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"11:00:30\",\"Checkout_id\":10,\"PosEvent_id\":10000060,\"Tender_Description\":\"Efectivo\",\"total_amount\":590.0,\"DocumentTender_id\":0,\"AffinityCardNbr_id\":\"\"},{\"SaleTrx_id\":3181303718,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"10:59:21\",\"Checkout_id\":10,\"PosEvent_id\":10000059,\"Tender_Description\":\"Efectivo\",\"total_amount\":862.0,\"DocumentTender_id\":0,\"AffinityCardNbr_id\":\"94652776\"},{\"SaleTrx_id\":3181303719,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"10:57:20\",\"Checkout_id\":10,\"PosEvent_id\":10000058,\"Tender_Description\":\"Tarjeta\",\"total_amount\":1690.0,\"DocumentTender_id\":94662772,\"AffinityCardNbr_id\":\"94652776\"},{\"SaleTrx_id\":3181303720,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"10:54:17\",\"Checkout_id\":10,\"PosEvent_id\":10000057,\"Tender_Description\":\"Efectivo\",\"total_amount\":132.0,\"DocumentTender_id\":0,\"AffinityCardNbr_id\":\"94652776\"},{\"SaleTrx_id\":3181303721,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"10:52:48\",\"Checkout_id\":10,\"PosEvent_id\":10000055,\"Tender_Description\":\"Efectivo\",\"total_amount\":1186.0,\"DocumentTender_id\":0,\"AffinityCardNbr_id\":\"17725619\"},{\"SaleTrx_id\":3181303722,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"10:51:18\",\"Checkout_id\":10,\"PosEvent_id\":10000054,\"Tender_Description\":\"Efectivo\",\"total_amount\":5931.07,\"DocumentTender_id\":0,\"AffinityCardNbr_id\":\"35555554\"},{\"SaleTrx_id\":3181303722,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"10:51:18\",\"Checkout_id\":10,\"PosEvent_id\":10000054,\"Tender_Description\":\"Tarjeta\",\"total_amount\":5931.07,\"DocumentTender_id\":35555554,\"AffinityCardNbr_id\":\"35555554\"},{\"SaleTrx_id\":3181303723,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"10:44:50\",\"Checkout_id\":10,\"PosEvent_id\":10000053,\"Tender_Description\":\"Tarjeta\",\"total_amount\":2685.2,\"DocumentTender_id\":16920061,\"AffinityCardNbr_id\":\"16920061\"},{\"SaleTrx_id\":3181303724,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"10:38:30\",\"Checkout_id\":10,\"PosEvent_id\":10000052,\"Tender_Description\":\"Tarjeta\",\"total_amount\":759.59,\"DocumentTender_id\":25499550,\"AffinityCardNbr_id\":\"25499550\"},{\"SaleTrx_id\":3181303725,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"10:36:25\",\"Checkout_id\":10,\"PosEvent_id\":10000051,\"Tender_Description\":\"Efectivo\",\"total_amount\":2900.0,\"DocumentTender_id\":0,\"AffinityCardNbr_id\":\"\"},{\"SaleTrx_id\":3181303726,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"10:34:48\",\"Checkout_id\":10,\"PosEvent_id\":10000049,\"Tender_Description\":\"Efectivo\",\"total_amount\":3098.0,\"DocumentTender_id\":0,\"AffinityCardNbr_id\":\"30803917\"},{\"SaleTrx_id\":3181303727,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"10:31:25\",\"Checkout_id\":10,\"PosEvent_id\":10000048,\"Tender_Description\":\"Tarjeta\",\"total_amount\":1052.0,\"DocumentTender_id\":4442380,\"AffinityCardNbr_id\":\"\"},{\"SaleTrx_id\":3181303728,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"10:28:59\",\"Checkout_id\":10,\"PosEvent_id\":10000047,\"Tender_Description\":\"Efectivo\",\"total_amount\":35.0,\"DocumentTender_id\":0,\"AffinityCardNbr_id\":\"36646607\"},{\"SaleTrx_id\":3181303729,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"10:28:27\",\"Checkout_id\":10,\"PosEvent_id\":10000046,\"Tender_Description\":\"Efectivo\",\"total_amount\":19.8,\"DocumentTender_id\":0,\"AffinityCardNbr_id\":\"\"},{\"SaleTrx_id\":3181303730,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"10:26:42\",\"Checkout_id\":10,\"PosEvent_id\":10000045,\"Tender_Description\":\"Tarjeta\",\"total_amount\":17999.0,\"DocumentTender_id\":16476451,\"AffinityCardNbr_id\":\"16476451\"},{\"SaleTrx_id\":3181303731,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"10:18:14\",\"Checkout_id\":10,\"PosEvent_id\":10000043,\"Tender_Description\":\"Efectivo\",\"total_amount\":858.0,\"DocumentTender_id\":0,\"AffinityCardNbr_id\":\"25866041\"},{\"SaleTrx_id\":3181303732,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"10:16:30\",\"Checkout_id\":10,\"PosEvent_id\":10000042,\"Tender_Description\":\"Tarjeta\",\"total_amount\":3655.13,\"DocumentTender_id\":5479033,\"AffinityCardNbr_id\":\"5479033\"},{\"SaleTrx_id\":3181303733,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"10:12:09\",\"Checkout_id\":10,\"PosEvent_id\":10000041,\"Tender_Description\":\"Efectivo\",\"total_amount\":1049.72,\"DocumentTender_id\":0,\"AffinityCardNbr_id\":\"36312651\"},{\"SaleTrx_id\":3181303733,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"10:12:09\",\"Checkout_id\":10,\"PosEvent_id\":10000041,\"Tender_Description\":\"Tarjeta\",\"total_amount\":1049.72,\"DocumentTender_id\":36312651,\"AffinityCardNbr_id\":\"36312651\"},{\"SaleTrx_id\":3181303734,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"10:08:57\",\"Checkout_id\":10,\"PosEvent_id\":10000040,\"Tender_Description\":\"Efectivo\",\"total_amount\":151.0,\"DocumentTender_id\":0,\"AffinityCardNbr_id\":\"\"},{\"SaleTrx_id\":3181303735,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"10:08:01\",\"Checkout_id\":10,\"PosEvent_id\":10000039,\"Tender_Description\":\"Efectivo\",\"total_amount\":476.0,\"DocumentTender_id\":0,\"AffinityCardNbr_id\":\"24258294\"},{\"SaleTrx_id\":3181303736,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"10:06:04\",\"Checkout_id\":10,\"PosEvent_id\":10000038,\"Tender_Description\":\"Efectivo\",\"total_amount\":42.9,\"DocumentTender_id\":0,\"AffinityCardNbr_id\":\"\"},{\"SaleTrx_id\":3181303737,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"10:05:36\",\"Checkout_id\":10,\"PosEvent_id\":10000037,\"Tender_Description\":\"Efectivo\",\"total_amount\":42.9,\"DocumentTender_id\":0,\"AffinityCardNbr_id\":\"\"},{\"SaleTrx_id\":3181303738,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"10:04:31\",\"Checkout_id\":10,\"PosEvent_id\":10000036,\"Tender_Description\":\"Tarjeta\",\"total_amount\":1293.8,\"DocumentTender_id\":16122012,\"AffinityCardNbr_id\":\"16122012\"},{\"SaleTrx_id\":3181303739,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"10:02:03\",\"Checkout_id\":10,\"PosEvent_id\":10000035,\"Tender_Description\":\"Efectivo\",\"total_amount\":148.0,\"DocumentTender_id\":0,\"AffinityCardNbr_id\":\"36223575\"},{\"SaleTrx_id\":3181303740,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"10:01:14\",\"Checkout_id\":10,\"PosEvent_id\":10000034,\"Tender_Description\":\"Tarjeta\",\"total_amount\":465.0,\"DocumentTender_id\":27156820,\"AffinityCardNbr_id\":\"24075105\"},{\"SaleTrx_id\":3181303741,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"09:56:16\",\"Checkout_id\":10,\"PosEvent_id\":10000033,\"Tender_Description\":\"Efectivo\",\"total_amount\":148.0,\"DocumentTender_id\":0,\"AffinityCardNbr_id\":\"22859766\"},{\"SaleTrx_id\":3181303742,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"09:53:25\",\"Checkout_id\":10,\"PosEvent_id\":10000032,\"Tender_Description\":\"Efectivo\",\"total_amount\":597.0,\"DocumentTender_id\":0,\"AffinityCardNbr_id\":\"\"},{\"SaleTrx_id\":3181303743,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"09:52:26\",\"Checkout_id\":10,\"PosEvent_id\":10000031,\"Tender_Description\":\"Efectivo\",\"total_amount\":139.0,\"DocumentTender_id\":0,\"AffinityCardNbr_id\":\"1025074930\"},{\"SaleTrx_id\":3181303744,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"09:51:43\",\"Checkout_id\":10,\"PosEvent_id\":10000030,\"Tender_Description\":\"Efectivo\",\"total_amount\":251.45,\"DocumentTender_id\":0,\"AffinityCardNbr_id\":\"1025074930\"},{\"SaleTrx_id\":3181303745,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"09:49:14\",\"Checkout_id\":10,\"PosEvent_id\":10000029,\"Tender_Description\":\"Tarjeta\",\"total_amount\":2914.6,\"DocumentTender_id\":12928388,\"AffinityCardNbr_id\":\"12928388\"},{\"SaleTrx_id\":3181303747,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"09:42:25\",\"Checkout_id\":10,\"PosEvent_id\":10000027,\"Tender_Description\":\"Tarjeta\",\"total_amount\":767.8,\"DocumentTender_id\":22083884,\"AffinityCardNbr_id\":\"22083884\"},{\"SaleTrx_id\":3181303748,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"09:40:05\",\"Checkout_id\":10,\"PosEvent_id\":10000026,\"Tender_Description\":\"Tarjeta\",\"total_amount\":4499.0,\"DocumentTender_id\":17874905,\"AffinityCardNbr_id\":\"17874905\"},{\"SaleTrx_id\":3181303749,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"09:38:02\",\"Checkout_id\":10,\"PosEvent_id\":10000025,\"Tender_Description\":\"Tarjeta\",\"total_amount\":4222.1,\"DocumentTender_id\":17874905,\"AffinityCardNbr_id\":\"17874905\"},{\"SaleTrx_id\":3181303750,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"09:33:29\",\"Checkout_id\":10,\"PosEvent_id\":10000024,\"Tender_Description\":\"Tarjeta\",\"total_amount\":2621.16,\"DocumentTender_id\":26767421,\"AffinityCardNbr_id\":\"26767421\"},{\"SaleTrx_id\":3181303750,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"09:33:29\",\"Checkout_id\":10,\"PosEvent_id\":10000024,\"Tender_Description\":\"Efectivo\",\"total_amount\":2621.16,\"DocumentTender_id\":0,\"AffinityCardNbr_id\":\"26767421\"},{\"SaleTrx_id\":3181303751,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"09:28:47\",\"Checkout_id\":10,\"PosEvent_id\":10000023,\"Tender_Description\":\"Tarjeta\",\"total_amount\":1988.17,\"DocumentTender_id\":30035604,\"AffinityCardNbr_id\":\"30035604\"},{\"SaleTrx_id\":3181303752,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"09:26:29\",\"Checkout_id\":10,\"PosEvent_id\":10000022,\"Tender_Description\":\"Tarjeta\",\"total_amount\":395.0,\"DocumentTender_id\":44132042,\"AffinityCardNbr_id\":\"\"},{\"SaleTrx_id\":3181303752,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"09:26:29\",\"Checkout_id\":10,\"PosEvent_id\":10000022,\"Tender_Description\":\"Efectivo\",\"total_amount\":395.0,\"DocumentTender_id\":0,\"AffinityCardNbr_id\":\"\"},{\"SaleTrx_id\":3181303755,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"09:12:11\",\"Checkout_id\":10,\"PosEvent_id\":10000019,\"Tender_Description\":\"Tarjeta\",\"total_amount\":114.0,\"DocumentTender_id\":27281056,\"AffinityCardNbr_id\":\"27281056\"},{\"SaleTrx_id\":3181303756,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"09:09:14\",\"Checkout_id\":10,\"PosEvent_id\":10000018,\"Tender_Description\":\"Efectivo\",\"total_amount\":4518.0,\"DocumentTender_id\":0,\"AffinityCardNbr_id\":\"10575900\"},{\"SaleTrx_id\":3181303757,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"09:03:37\",\"Checkout_id\":10,\"PosEvent_id\":10000017,\"Tender_Description\":\"Tarjeta\",\"total_amount\":1752.36,\"DocumentTender_id\":13215420,\"AffinityCardNbr_id\":\"13215420\"},{\"SaleTrx_id\":3181303758,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"09:00:15\",\"Checkout_id\":10,\"PosEvent_id\":10000016,\"Tender_Description\":\"Efectivo\",\"total_amount\":1133.12,\"DocumentTender_id\":0,\"AffinityCardNbr_id\":\"11853582\"},{\"SaleTrx_id\":3181303761,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"08:56:23\",\"Checkout_id\":10,\"PosEvent_id\":10000013,\"Tender_Description\":\"Efectivo\",\"total_amount\":3050.93,\"DocumentTender_id\":0,\"AffinityCardNbr_id\":\"6694336\"},{\"SaleTrx_id\":3181303761,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"08:56:23\",\"Checkout_id\":10,\"PosEvent_id\":10000013,\"Tender_Description\":\"Tarjeta\",\"total_amount\":3050.93,\"DocumentTender_id\":6694336,\"AffinityCardNbr_id\":\"6694336\"},{\"SaleTrx_id\":3181303762,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"08:46:41\",\"Checkout_id\":10,\"PosEvent_id\":10000011,\"Tender_Description\":\"Tarjeta\",\"total_amount\":1597.0,\"DocumentTender_id\":18155212,\"AffinityCardNbr_id\":\"18155212\"},{\"SaleTrx_id\":3181303763,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"08:43:16\",\"Checkout_id\":10,\"PosEvent_id\":10000010,\"Tender_Description\":\"Efectivo\",\"total_amount\":1591.0,\"DocumentTender_id\":0,\"AffinityCardNbr_id\":\"\"},{\"SaleTrx_id\":3181303764,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"08:40:05\",\"Checkout_id\":10,\"PosEvent_id\":10000009,\"Tender_Description\":\"Tarjeta\",\"total_amount\":1509.55,\"DocumentTender_id\":24075398,\"AffinityCardNbr_id\":\"\"},{\"SaleTrx_id\":3181303765,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"08:37:48\",\"Checkout_id\":10,\"PosEvent_id\":10000008,\"Tender_Description\":\"Tarjeta\",\"total_amount\":2491.8,\"DocumentTender_id\":28042202,\"AffinityCardNbr_id\":\"24100263\"},{\"SaleTrx_id\":3181303765,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"08:37:48\",\"Checkout_id\":10,\"PosEvent_id\":10000008,\"Tender_Description\":\"Efectivo\",\"total_amount\":2491.8,\"DocumentTender_id\":0,\"AffinityCardNbr_id\":\"24100263\"},{\"SaleTrx_id\":3181303766,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"08:31:45\",\"Checkout_id\":10,\"PosEvent_id\":10000007,\"Tender_Description\":\"Efectivo\",\"total_amount\":1862.0,\"DocumentTender_id\":0,\"AffinityCardNbr_id\":\"10620940\"},{\"SaleTrx_id\":3181303767,\"CDay_id\":\"2020-05-14\",\"OpPoint_Description\":\"001 - San Isidro\",\"TrxEndSecond_Description\":\"08:28:51\",\"Checkout_id\":10,\"PosEvent_id\":10000006,\"Tender_Description\":\"Efectivo\",\"total_amount\":2902.0,\"DocumentTender_id\":0,\"AffinityCardNbr_id\":\"18221207\"}]";
		Transaccion[] respuesta = new Gson().fromJson(json, Transaccion[].class);*/
		return respuesta;
	}
	
	@Override
	public String getMediosPago() throws GeneralSecurityException {
		logger.info("getMediosPago() Ha comenzado a realizar la consulta");
		RestTemplate rest = armarConexion();
		tipoMedio = MediaType.APPLICATION_JSON;
		HttpEntity entidad = new HttpEntity(armarCabecera(false));
		ResponseEntity<String> response = rest.exchange(crearUrl(this.dataMedioPago,true),HttpMethod.GET,entidad,String.class);
		return response.getBody();
		/*String respuesta = "{\"ResultRows\":[{\"Tender_Description\":\"Medio de Pago Indefinido (  3015)\",\"Tender_id\":3015},{\"Tender_Description\":\"Medio de Pago Indefinido (  3014)\",\"Tender_id\":3014},{\"Tender_Description\":\"PIM\",\"Tender_id\":14},{\"Tender_Description\":\"T. Posnet\",\"Tender_id\":6},{\"Tender_Description\":\"Credit Voucher\",\"Tender_id\":12},{\"Tender_Description\":\"Medio de Pago Discontinuado\",\"Tender_id\":77},{\"Tender_Description\":\"Medio de Pago Indefinido (  3016)\",\"Tender_id\":3016},{\"Tender_Description\":\"Mercado de Pago\",\"Tender_id\":16},{\"Tender_Description\":\"Link de Pago\",\"Tender_id\":17},{\"Tender_Description\":\"Cuenta DNI\",\"Tender_id\":15},{\"Tender_Description\":\"Medio de Pago Tkt Discontinuado\",\"Tender_id\":88},{\"Tender_Description\":\"Link de Pago\",\"Tender_id\":22},{\"Tender_Description\":\"Moneda Extranjera\",\"Tender_id\":7},{\"Tender_Description\":\"Cheque\",\"Tender_id\":4},{\"Tender_Description\":\"Medio de Pago TC Discontinuado\",\"Tender_id\":99},{\"Tender_Description\":\"Tarjeta\",\"Tender_id\":2},{\"Tender_Description\":\"BSF autom\\u00e1tico\",\"Tender_id\":8},{\"Tender_Description\":\"Medio de Pago Indefinido (  3017)\",\"Tender_id\":3017},{\"Tender_Description\":\"Medio de Pago Indefinido (  3003)\",\"Tender_id\":3003},{\"Tender_Description\":\"Fortalecimiento Familiar (Mutuales)\",\"Tender_id\":10},{\"Tender_Description\":\"Medio de Pago No Referenciado\",\"Tender_id\":-1},{\"Tender_Description\":\"Medio de Pago Indefinido (  3002)\",\"Tender_id\":3002},{\"Tender_Description\":\"BSF manual\",\"Tender_id\":9},{\"Tender_Description\":\"Medio de Pago Indefinido (  3000)\",\"Tender_id\":3000},{\"Tender_Description\":\"Tickets\",\"Tender_id\":3},{\"Tender_Description\":\"Cuenta Corriente\",\"Tender_id\":11},{\"Tender_Description\":\"Efectivo\",\"Tender_id\":1}]}\r\n";
		return respuesta;*/
	}
	
	@Override
	public String generarPdf(Detalles detail) throws JRException, IOException {
		return new Report(detail,documento.getGuardar())
				.crear(documento.getPrincipal(),documento.getPagos(),documento.getPieTexto());
	}
	

	@Override
	public Store getStore(){

		UserHelper userHelper = new UserHelper();
		logger.info("getStore() Web service");
		User user = userHelper.getUser();
		logger.info("Petición realizada por => " + user.getNombre());
		Store stores = new Store();
		logger.info("Sucursal principal => " + user.getSucursal());
		stores.setMain(user.getSucursal());
		logger.info("Es multi punto => " + user.getEsMultipunto());
		stores.setMultiple(user.getEsMultipunto());
		stores.setSecondary(userHelper.getPuntosSecundarios());
		logger.info("Los puntos secundarios => " + userHelper.getUser().getPuntosSecundarios());
		logger.info("Los perfiles => " + userHelper.getUser().getPerfiles());
		
		return stores;
	}
	
	//tools
	
	private HttpHeaders armarCabecera(boolean formato)throws WebServiceException{
		logger.info("armarCabeceras() Ha comenzado a crear header de consulta");
		HttpHeaders headers = new HttpHeaders();
		headers.add("Authorization", this.autorizacion);
		if(formato) headers.setContentType(tipoMedio);
		return headers;
	}
	
	private RestTemplate armarConexion() throws GeneralSecurityException, KeyStoreException{
		logger.info("armarConexion() Ha comenzado a crear template de consulta");
		RestTemplate rest = new RestTemplate(new BufferingClientHttpRequestFactory(armarContextoSSL()));
		rest.setErrorHandler(manejoError);
		rest.setInterceptors(armarInterceptor());
		logger.info("armarConexion() Ha terminado de crear template de consulta");
		return rest;
	}
	
	private HttpComponentsClientHttpRequestFactory armarContextoSSL() throws GeneralSecurityException, KeyStoreException{
		logger.info("armarContextoSSL() Ha comenzado a generar la certificación del SSL");
		TrustStrategy estrategiaAceptada = (X509Certificate[] chain, String type) -> true;
		SSLContext sslContext = SSLContexts.custom().loadTrustMaterial(null,estrategiaAceptada).build();
		CloseableHttpClient cliente = HttpClients.custom().setSSLContext(sslContext).build();
		HttpComponentsClientHttpRequestFactory factory = new HttpComponentsClientHttpRequestFactory();
		factory.setHttpClient(cliente);
		logger.info("armarContextoSSL() Ha terminado de generar la certificación del SSL");
		return factory;
	}
	
	private List<ClientHttpRequestInterceptor> armarInterceptor(){
		logger.info("armarInterceptor() Ha comenzado a crear el interceptor");
		List<ClientHttpRequestInterceptor> interceptors = new ArrayList<>();
		loggin = new LogginWebService();
		interceptors.add(loggin);
		logger.info("armarInterceptor() Ha finalizado de crear el interceptor");
		return interceptors;
	}
	
	private String crearUrl(String data, boolean medioPago) {
		logger.info("crearUrl() Ha comenzado a realizar la url - V11");
		String res = String.format("%s/%s/%s/%s", this.url, this.ambiente, medioPago ? this.ubicacionMedioPago : this.ubicacion, data);
		logger.info("Ha realizado la url y ha generado: " + res);
		return res;
	}
		
	private DetalleTransaccion varificarPago(DetalleTransaccion res) {
		List<Pago> pagos = new ArrayList<Pago>( 
                Arrays.asList(res.getPagos()));

		for (Pago p: res.getPagos()) {
			if (p.getF_TenderSurcharge() - Double.valueOf(0)  != 0) {
				Pago pag = new Pago();
				pag.setDocumentTender_id(p.getDocumentTender_id());
				pag.setF_TenderAmount(p.getF_TenderSurcharge());
				pag.setF_TenderCashReturn(p.getF_TenderCashReturn());
				pag.setF_TenderSurcharge(p.getF_TenderSurcharge());
				pag.setTender_Description("Interes");
				pag.setSubTender_Description(p.getSubTender_Description());

				pagos.add(pag);
			}
			
			if (p.getF_TenderCashReturn() - Double.valueOf(0)  != 0) {
				Pago pag = new Pago();
				pag.setDocumentTender_id(p.getDocumentTender_id());
				pag.setF_TenderAmount(p.getF_TenderCashReturn());
				pag.setF_TenderCashReturn(p.getF_TenderCashReturn());
				pag.setF_TenderSurcharge(p.getF_TenderSurcharge());
				pag.setTender_Description("Vuelto");
				pag.setSubTender_Description(p.getSubTender_Description());

				pagos.add(pag);
			}
		}
		
		res.setPagos(pagos.toArray(res.getPagos()));
		return res;
	}


}